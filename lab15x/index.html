<!DOCTYPE html>
<html lang="en">
<head>
	<title>Lab 15</title>
	<link rel="stylesheet" type="text/css" href="./css/lab.css">
	<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
	<script src="js/lab.js" DEFER></script>
</head>
<h1>Lab 15 -  AJAX</h1>
<body>
	<main id="content">
		<section>
			<div id="minor-section">
					<h2>Challenge</h2>
					<p>AJAX.</p>
			</div>

			<div id="minor-section">
					<h2>problems</h2>
					<p>None yet!</p>
					

			<div id="section">
					<h2>Results</h2>
					<p>A decent lab15!!</p>
					
			</div>
		</section>			
	 </main>
    <div id="app">
        <button id="yesnoButton" style="padding: 10px 20px; font-size: 16px;">Activate!</button>
        <div id="response"></div>
    </div>

    <script>
        $(document).ready(function () {
            // Attach a click event to the button
            $('#yesnoButton').click(function () {
                // Make the AJAX request
                $.ajax({
                    // Correct API URL
                    url: "https://yesno.wtf/api",
                    // No additional data required
                    data: {},
                    // GET request
                    type: "GET",
                    // Expecting JSON data
                    dataType: "json",
                    // Success callback
                    success: function (data) {
                        console.log(data);

                        // Display the result
                        $('#response').html(`
                            <p>Answer: <strong>${data.answer.toUpperCase()}</strong></p>
                            <img src="${data.image}" alt="${data.answer}" style="max-width:300px;"/>
                        `);
                    },
                    // Error callback
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.error("Error:", textStatus, errorThrown);
                        $('#response').text("Failed to fetch the Yes/No response. Please try again.");
                    }
                });
            });
        });
    </script>
</body>
</html>
